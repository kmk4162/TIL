{% extends 'base.html' %}
{% load static %}
{% load django_bootstrap5 %}

{% block css %}
{% endblock css %}

{% block body %}
  <div class='d-flex justify-content-between'>
    <h1>{{ article.pk }}번째 망나뇽</h1>
    <div class="buttons">
      <a href="{% url 'articles:update' article.pk %}"><button type="submit" class="create-btn">Wanna Update</button></a>
      <button type="submit" class="delete-btn" data-bs-toggle="modal" data-bs-target="#exampleModal">
        Delete!
      </button>
    
      <!-- Modal -->
      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5 text-danger" id="exampleModalLabel">Warning!</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <p>Are U Sure?</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
              <a href="{% url 'articles:delete' article.pk %}">
                <button type="button" class="btn btn-primary">Yes!</button>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card mb-3">
    {% if article.image %}
      <img src="{{ article.image.url }}" class="card-img-top" alt="썸네일 이미지">
    {% endif %}
    <div class="card-body">
      <div class="card">
        <div class="card-body">
          <h3 class="card-title">{{ article.title }}</h3>
          <p class="card-text">{{ article.content }}</p>
        </div>
      </div>
    </div>
  </div>

  {% comment %} 댓글 {% endcomment %}
  <div class="mb-3">
    <h1>댓글 작성</h1>
    <form action="{% url 'articles:create_comment' article.pk %}" method="POST">
      {% csrf_token %}
      {% bootstrap_form comment_form layout='inline'%}
      <p class="mt-3" >{% bootstrap_button button_type="submit" content="댓글달기" %}</p>
    </form>
  </div>
  
  <h1>댓글목록</h1>
  {% for comment in comments %}
  <ul class="list-group">
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <div>
        <span style="font-weight: bold">{{ comment.user }}</span>
        <span>{{ comment.content }}</span>
      </div>
      <div>
        <button type="submit" class="delete-btn" data-bs-toggle="modal" data-bs-target="#exampleModal">
          댓글 삭제
        </button>
      
        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h1 class="modal-title fs-5 text-danger" id="exampleModalLabel">Warning!</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p>Are U Sure?</p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
                <a href="{% url 'articles:delete_comment' article.pk comment.pk %}">
                  <button type="button" class="btn btn-primary">Yes!</button>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </li>
  </ul>
  {% endfor %}
{% endblock body %}